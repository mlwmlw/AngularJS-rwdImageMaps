/*
* rwdImageMaps AngularJS Directive v1.0
*
* Allows image maps to be used in a responsive design by recalculating the area coordinates to match the actual image size on load and window.resize
* 
* Original Copyright (c) 2013 Matt Stow
* https://github.com/stowball/jQuery-rwdImageMaps
* http://mattstow.com
* Licensed under the MIT license
*
* angular-rwdImageMaps.js (by Philip Saa)
* https://github.com/cowglow/
* @cowglow
*
* http://mlwmlw.org
* Remove jQuery dependency
* @mlwmlw
*/
angular.module("rwdImageMaps",[]).directive("rwdimgmap",function(e){return{restrict:"CA",link:function(r,n,a){n.bind("load",function(){var r=n[0].naturalWidth,i=n[0].naturalHeight,t=[];function l(){if(!r||!i){var e=new Image;e.src=n[0].src;if(e.src==undefined)e.src=n[0].ng-src;if(!r)r=e.width;if(!i)i=e.height}var l=n[0].width/r,g=n[0].height/i,u=a.usemap.replace("#",""),c="coords";angular.forEach(angular.element(document.getElementsByName(u)).find("area"),function(e,r){if(!e[c]){return}if(!t[r])t[r]=e[c];var n=t[r].split(","),a=new Array(n.length);for(var r=0;r<a.length;++r){if(r%2===0){a[r]=parseInt(n[r]*l)}else{a[r]=parseInt(n[r]*g)}}e[c]=a.toString()})}angular.element(e).bind("resize",l).triggerHandler("resize")})}}});